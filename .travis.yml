language: python
python:
    - "2.6"

branches:
  only:
    - master

notifications:
  email:
    - ben@groovie.org

install:
    - make build
    - make cassandra

before_script:
    - bin/supervisord
    - sleep 5
    - bin/cassandra/bin/cassandra-cli -host 127.0.0.1 --file etc/cassandra/message_schema.txt
    - bin/cassandra/bin/cassandra-cli -host 127.0.0.1 --file etc/cassandra/metadata_schema.txt

script: make test

after_script:
    - bin/supervisorctl shutdown
